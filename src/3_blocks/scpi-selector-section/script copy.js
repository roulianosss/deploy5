const data = [
  {
    title: "PIERVAL SANTE",
    sector: "Santé",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["Europe"],
      name: "Europe"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 1020,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "LF AVENIR SANTE",
    sector: "Santé",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["Europe", "France"],
      name: "Europe, Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 300,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "PRIMOVIE",
    sector: "Santé",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["Europe"],
      name: "Europe"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 2030,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "PF HOSPITALITE EUROPE",
    sector: "Santé",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["Europe"],
      name: "Europe"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 1000,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "PRIMOFAMILY",
    sector: "Résidentiel",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 2040,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "VENDOME REGIONS",
    sector: "Diversifiée",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 3350,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "INTERPIERRE France",
    sector: "Diversifiée",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },

    minimumAccessAmount: 5250,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "CŒUR DE REGION",
    sector: "Diversifiée",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },

    minimumAccessAmount: 659,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "ESG PIERRE CAPITALE",
    sector: "Diversifiée",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 1025,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "EPARGNE FONCIERE",
    sector: "Bureaux",
    capitalization: "5 061 394 250 €",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "835 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,40%"
    },
    minimumAccessAmount: 835,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "EPARGNE PIERRE",
    sector: "Bureaux",
    capitalization: "1 774 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "5,36%"
    },
    minimumAccessAmount: 2080,
    logoUrl: "./assets/logos/atland_voisin.png"
  },
  {
    title: "LF EUROPIMMO",
    sector: "Bureaux",
    capitalization: "103 289 055 €",
    geographicalArea: {
      areas: ["Europe"],
      name: "Europe"
    },
    subscriptionPrice: "1045 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,02%"
    },
    minimumAccessAmount: 1045,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "EFIMMO 1",
    sector: "Bureaux",
    capitalization: "1 876 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "237 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,91%"
    },
    minimumAccessAmount: 2370,
    logoUrl: "./assets/logos/la_francaise.png"
  },
  {
    title: "PRIMOPIERRE",
    sector: "Bureaux",
    capitalization: "3,9 Mds €",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "208 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,77%"
    },
    minimumAccessAmount: 2080,
    logoUrl: "./assets/logos/primonial.png"
  },
  {
    title: "PFO2",
    sector: "Bureaux",
    capitalization: "2 848 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "196 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,59%"
    },
    minimumAccessAmount: 5880,
    logoUrl: "./assets/logos/perial.png"
  },
  {
    title: "PF GRAND PARIS",
    sector: "Bureaux",
    capitalization: "1 228 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "544 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,42%%"
    },
    minimumAccessAmount: 5440,
    logoUrl: "./assets/logos/perial.png"
  },
  {
    title: "IMMORENTE",
    sector: "Commerces",
    capitalization: "1 228 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "544 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,42%%"
    },
    minimumAccessAmount: 1360,
    logoUrl: "./assets/logos/perial.png"
  },
  {
    title: "ACTIVIMMO",
    sector: "Logistique",
    capitalization: "1 228 M€",
    geographicalArea: {
      areas: ["France"],
      name: "Ile-de-France"
    },
    subscriptionPrice: "544 €",
    payoutRatio: {
      name: "Taux de distribution en 2021 :",
      value: "4,42%%"
    },

    minimumAccessAmount: 3100,
    logoUrl: "./assets/logos/perial.png"
  }
];

const cardsContainer = document.querySelector('.scpi-selector__selectors-container__resultsCards')
const allBtns = document.querySelectorAll('.scpi-selector__selectors-container__sectoralCategory__btns-container__btn, .scpi-selector__selectors-container__geographicalArea__btns-container__btn')

allBtns.forEach(btn => btn.addEventListener('click', (e) => handleClick(e)))

const selectedOptions = {
  initialInvestissement: 100000,
  // sectoralCategory: ["Commerces"],
  // geographicalArea: ["France", "Europe"],
  selectedBtns: ["France", "Europe", "Commerce"]
};

function filteredCards(selectedOptions) {
  return data
    .filter(
      (card) =>
        card.minimumAccessAmount <= selectedOptions.initialInvestissement
    )
    .filter((card) => selectedOptions.sectoralCategory.includes(card.sector))
    .filter((card) =>
      card.geographicalArea.areas
        .map((area) => selectedOptions.geographicalArea.includes(area))
        .every(Boolean)
    );
}

function handleSelectedOption(sectoralArray, geographicalArray, string) {
  const indexsectoralArray = selectedOptions.sectoralCategory.indexOf(string);
  const indexgeographicalArray = selectedOptions.geographicalArea.indexOf(string);



  if (indexsectoralArray !== -1) {
    selectedOptions.sectoralCategory.splice(indexsectoralArray, 1);
  } else {
    selectedOptions.sectoralCategory.push(string); 
  }

  if (indexgeographicalArray !== -1) {
    selectedOptions.geographicalArea.splice(indexgeographicalArray, 1);
  } else {
    selectedOptions.geographicalArea.push(string);
  }
  handleBtnBackground()
}

function handleBtnBackground() {
  
  allBtns.forEach(btn => {
    const isButtonSelected = selectedOptions.geographicalArea.includes(btn.getAttribute('data-attr'))
    console.log(btn , isButtonSelected)
    btn.style.background = isButtonSelected ? '#ff6442' : '#f3f5f6'
    btn.style.color = isButtonSelected ? '#f3f5f6' : '#001329'
  })
}


function handleClick(e) {
  const btnLabel = e.target.getAttribute('data-attr')
  handleSelectedOption(selectedOptions.sectoralCategory, selectedOptions.geographicalArea, btnLabel)
}

function displayCards(cards) {

}

handleBtnBackground()